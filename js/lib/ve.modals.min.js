try{if(!Nabu){throw"Nabu Manager not loaded"}}catch(e){throw"Nabu Manager not loaded"}if(typeof Nabu.VisualEditor==="undefined"){Nabu.VisualEditor=function(){}}if(typeof Nabu.VisualEditor.Modals==="undefined"){Nabu.VisualEditor.Modals=function(){}}Nabu.VisualEditor.Modals.SiteTarget=function(){};Nabu.VisualEditor.Modals.SiteTarget.prototype={newSiteTarget:function(f,a,h,d,i){f.lockWheel();var b=h.getModel();var c=h.getDefaultParent();var g=new Nabu.UI.Modal(a[0],{});g.addEventListener(new Nabu.Event({onAfterSubmit:function(n){var j=a.find('[data-toggle="nabu-lang-selector"]');if(j.length===1){var m=j.data();if(m.defaultLang){var k=a.find('form input[name="title['+m.defaultLang+']"]');if(k.length===1){var l=h.insertVertex(c,null,k.val(),i.x,i.y,120,160,"shape="+d+";whiteSpace=wrap;");l.type=d;l.objectId=n.params.response.json.data.id*1;l.id="st-"+n.params.response.json.data.id;f.saveCellsGeometry([l])}}}n.source.close();f.unlockWheel()}}));g.openRemote("/es/productos/sitios/ajax/"+f.id+"/nuevo-destino?type="+d)},newPage:function(c,a,b,d){this.newSiteTarget(c,a,b,"page",d)},newDocument:function(c,a,b,d){this.newSiteTarget(c,a,b,"document",d)},newPageMulti:function(c,a,b,d){this.newSiteTarget(c,a,b,"page-multi",d)},newDocumentMulti:function(c,a,b,d){this.newSiteTarget(c,a,b,"document-multi",d)},mainContent:function(d,b,c,a){d.lockWheel();var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(j){var g=b.find('[data-toggle="nabu-lang-selector"]');if(g.length===1){var i=g.data();if(i.defaultLang){var h=b.find('form input[name="title['+i.defaultLang+']"]');if(h.length===1){c.setValue(a,h.val())}}}j.source.close()},onHideCompleted:function(g){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/contenido-principal")},url:function(d,b,c,a){d.lockWheel();var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(g){g.source.close()},onHideCompleted:function(g){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/url")},seo:function(d,b,c,a){d.lockWheel();var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(g){g.source.close()},onHideCompleted:function(g){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/seo")},section:function(d,b,c,a,g){d.lockWheel();g=(typeof g==="undefined"?"":g);var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(l){var h=b.find('[data-toggle="nabu-lang-selector"]');if(h.length===1){var j=h.data();if(j.defaultLang){var i=b.find('form input[name="title['+j.defaultLang+']"]');if(i.length===1){if(g===""){if(!a.section_ids){a.section_ids=[l.params.response.json.data.id];a.section_names=[i.val()]}else{a.section_ids.push(l.params.response.json.data.id);a.section_names.push(i.val())}}else{var k=a.section_ids.indexOf(g);if(k>-1){a.section_names[k]=i.val()}}}}}l.source.close()},onHideCompleted:function(h){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/seccion/"+g)},removeSections:function(d,b,c,a){d.lockWheel();var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(k){var j=k.params.response.json.data.ids;if(j instanceof Array&&j.length>0&&a.section_ids&&a.section_ids instanceof Array&&a.section_ids.length>0){console.log("Hola");console.log(j);var l=new Array();var m=new Array();for(var h=0;h<a.section_ids.length;h++){var g=a.section_ids[h];if(j.indexOf(g*1)<0){l.push(g);m.push(a.section_names[h])}}a.section_ids=l;a.section_names=m;console.log(l);console.log(m)}k.source.close()},onHideCompleted:function(g){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/eliminar-secciones")},sdkIdentity:function(d,b,c,a){d.lockWheel();var f=new Nabu.UI.Modal(b[0],{});f.addEventListener(new Nabu.Event({onAfterSubmit:function(g){g.source.close()},onHideCompleted:function(g){d.unlockWheel()}}));f.openRemote("/es/productos/sitios/ajax/"+d.id+"/destino/"+a.objectId+"/identificacion")}};nabu.registerLibrary("VE.Modals",["Modal"]);